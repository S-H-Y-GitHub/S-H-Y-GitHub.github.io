---
layout:     post
title:      "Vim命令大全"
subtitle:   "Vim Cheat Sheet"
date:       2017/2/11 15:27:36 
author:     "率怀一"
header-img: "img/in-post/2017-02-11-vim-cheat-sheet/post-bg.jpg"
catalog: true
tags:
    - Linux
    - Vim
    - 学习笔记
---

# 概述 #

Vi是“Visual interface”的简称，它在Linux上的地位就仿佛Edit程序在DOS上一样。它可以执行输出、删除、查找、替换、块操作等众多文本操作，而且用户可以根据自己的需要对其进行定制。Vi不是一个排版程序，它不象Word或WPS那样可以对字体、格式、段落等其他属性进行编排，它只是一个文本编辑程序。 vi没有菜单，只有命令，且命令繁多。Vim是Vi编辑器的增强版本，对Vi的功能进行了增强和拓展。

Vim有三种基本工作模式：

- 命令模式
- 文本输入模式
- 末行模式

# 命令模式 #

任何时候，不管用户处于何种模式，只要按一下ESC键，即可使Vi进入命令模式；我们在shell环境(提示符为$)下输入启动Vi命令，进入编辑器时，也是处于该模式下。在该模式下，用户可以输入各种合法的Vi命令，用于管理自己的文档。此时从键盘上输入的任何字符都被当做编辑命令来解释，若输入的字符是合法的Vi命令，则Vi在接受用户命令之后完成相应的动作。但需注意的是，所输入的命令并不在屏幕上显示出来。若输入的字符不是Vi的合法命令，Vi会响铃报警。

下面这张图片显示了几乎所有的Vi命令模式下的命令，有着很强的参考价值。

![](\img\in-post\2017-02-11-vim-cheat-sheet\19105004_eXTo.jpg)

# 文本输入模式 #

在命令模式下输入插入命令i、附加命令a 、打开命令o、修改命令c、取代命令r或替换命令s都可以进入文本输入模式。在该模式下，用户输入的任何字符都被Vi当做文件内容保存起来，并将其显示在屏幕上。在文本输入过程中，若想回到命令模式下，按键ESC即可。

# 末行模式 #

末行模式也称ex转义模式。在命令模式下，用户按“:”键即可进入末行模式下，此时Vi会在显示窗口的最后一行(通常也是屏幕的最后一行)显示一个“:”作为末行模式的提示符，等待用户输入命令。多数文件管理命令都是在此模式下执行的(如把编辑缓冲区的内容写到文件中等)。末行命令执行完后，Vi自动回到命令模式。例如：

```vi
:sp newfile
```

则分出一个窗口编辑newfile文件。如果要从命令模式转换到编辑模式，可以键入命令a或者i；如果需要从文本模式返回，则按Esc键即可。在命令模式下输入“:”即可切换到末行模式，然后输入命令。下面是一些常见的末行命令。

- :q-表示退出
- :q!-强制不保存退出
- :W-表示保存
- :w xxx-表示另存为xxx文件
- :wq-表示保存并且退出
- :!-执行shell命令，如果是win表示执行dos命令
- :r!-执行shell命令，并且将执行结果回写到文档中
- :数字-直接跳转到某一行
- :G-直接跳转到最后一行
- :/xxx-表示搜索字符xxx并且结果会高亮显示，再使用n可以跳转下一个
- :%s/a/b/g-替换指令，将全部文档的a替换为b
- :set nu或set nonu-显示或者隐藏行号
- :1,10s/^/#/g-第一行到第十行前加#
- :1,10s/#//g-第一行到第十行前的#去掉
- :1,10d-删除第一行到第十行
- :1,10>>-第一行到第十行缩进
- :1,10<<-第一行到第十行反向缩进
- :u-取消之前的编辑操作,ctrl+y可以对取消操作恢复 说明：%s表示整个文档，1,10s表示第一行到第十行，/g表示整篇文档